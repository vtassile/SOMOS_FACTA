<page-header title={{title}}></page-header>

<div class="w-full h-full principal" fxLayout="row wrap" fxLayoutAlign="center center">
    <mat-card class="mat-elevation-z4 m-b-0 tarjeta">

        <form class="form-field-full" [formGroup]="angForm_2">
            <mat-card-title>
                <div>
                    <app-carga-imagen *ngIf="leido" [imagen_ingreso]="angForm_2.value.s_imagen" [ancho]="ancho_imagen"
                        [alto]="alto_imagen" [calidad]="calidad_imagen"
                        (imagen_salida)="cambia_valor('s_imagen',$event)">
                    </app-carga-imagen>

                </div>
            </mat-card-title>

            <mat-card-content>
                <mat-form-field appearance="outline">
                    <mat-label>Usuario</mat-label>
                    <input matInput formControlName="s_username">
                </mat-form-field>

                <mat-form-field col-md-6 appearance="outline">
                    <mat-label>Nombre</mat-label>
                    <input matInput placeholder="Ingrese Nombre" formControlName="s_name" required>
                    <mat-error *ngIf="angForm_2.get('s_name').invalid && angForm_2.get('s_name').dirty">Ingrese
                        Nombre
                    </mat-error>
                </mat-form-field>

                <mat-form-field col-md-6 appearance="outline">
                    <mat-label>Apellido</mat-label>
                    <input matInput placeholder="Ingrese Apellido" formControlName="s_surname" required>
                    <mat-error *ngIf="angForm_2.get('s_surname').invalid && angForm_2.get('s_surname').dirty">Ingrese
                        Apellido
                    </mat-error>
                </mat-form-field>

                <mat-form-field col-md-6 appearance="outline">
                    <mat-label>Telefono</mat-label>
                    <input matInput placeholder="Ingrese Telefono" formControlName="s_fono" type="tel" required>
                    <mat-error *ngIf="angForm_2.get('s_fono').invalid && angForm_2.get('s_fono').dirty">Ingrese
                        Telefono
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Mail</mat-label>
                    <input matInput placeholder="Ex. pat@example.com" formControlName="s_email" type="email" required>
                    <mat-error *ngIf="angForm_2.get('s_email').hasError('required')">Ingrese Email</mat-error>
                    <mat-error *ngIf="angForm_2.get('s_email').hasError('email')">Ingrese Email Válido</mat-error>
                </mat-form-field>

                <mat-card *ngIf="permite_edit">
                    <mat-select formControlName="rol" required>
                        <mat-option *ngFor="let rol of roles" [value]="rol._id">
                            {{rol.s_detalle}}
                        </mat-option>
                    </mat-select>

                </mat-card>

                <mat-card>
                    <mat-select  formControlName="clase">
                        <mat-option *ngFor="let userclase of userclases" [value]="userclase._id">
                            {{userclase.s_detalle}}
                        </mat-option>
                    </mat-select>
                </mat-card>

                <mat-card>
                    <mat-radio-group class="example-radio-group" formControlName="tmenu">
                        <mat-radio-button class="example-radio-button" *ngFor="let tmenu of tmenus" [value]="tmenu._id"
                            id={{tmenu.s_detalle}}>
                            {{tmenu.s_detalle}}
                        </mat-radio-button>
                    </mat-radio-group>
                </mat-card>

                <mat-checkbox formControlName="s_mostrar">Cambiar Contraseña</mat-checkbox>
                <br>
                <div *ngIf="angForm_2.value.s_mostrar">
                    <mat-form-field appearance="outline">
                        <mat-label>Contraseña Anterior</mat-label>
                        <input matInput placeholder="Ingrese Contraseña Anterior" type="password"
                            formControlName="s_clave_vieja" required>
                        <mat-error *ngIf="angForm_2.get('s_clave_vieja').hasError('required')">Ingrese contraseña
                            Anterior</mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Contraseña Nueva</mat-label>
                        <input matInput placeholder="Ingrese Contraseña" type="password" formControlName="s_clave"
                            required>
                        <mat-error *ngIf="angForm_2.get('s_clave').hasError('required')">Ingrese contraseña</mat-error>
                        <mat-error *ngIf="angForm_2.get('s_clave').hasError('minlength')">Contraseña con mínimo 12
                            Caracteres
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Confirmar Contraseña</mat-label>
                        <input matInput placeholder="Confirme Contraseña" type="password"
                            formControlName="confirmPassword" required>
                        <mat-error *ngIf="angForm_2.get('confirmPassword').hasError('required')">Confirme contraseña!
                        </mat-error>
                        <mat-error *ngIf="angForm_2.get('confirmPassword').hasError('confirm')">Contraseña
                            inconsistente!
                        </mat-error>
                    </mat-form-field>
                </div>

                <mat-divider></mat-divider>
                <br>
                <div class="social-media w-full">
                    <!--sign up by fb and tw-->
                    <button class="btn1">
                        <a href="#" target="_blank" (click)="signInWithFB($event)">
                            <i class="fa fa-facebook"></i>&nbsp;&nbsp; Acceder con Facebook
                        </a>
                    </button>
                    <button class="btn2">
                        <a href="#" target="_blank" (click)="signInWithGoogle($event)">
                            <i class="fa fa-google"></i> &nbsp;&nbsp; Acceder con Google
                        </a>
                    </button>
                </div>

                <mat-card fxLayoutGap="5px" fxLayout="row " fxLayoutAlign="space-around space-around ">
                    <button mat-raised-button class="boton" color="primary" (click)="update($event)">Confirmar</button>
                    <button mat-raised-button class="boton" color="warn" [routerLink]="['/']">Cancelar</button>
                </mat-card>
            </mat-card-content>

        </form>


    </mat-card>
</div>